<div class="container col-md-12 pt-4">
  <section>
    <div class="col-lg-12">
      <!-- <input class="form-control btn-primary" type="button" (click)="convert()"> -->
      <div class="row">
        <div class="col-lg-7">
          <div id="invoiceContent" #inoviceContent style="background-color:white;">
            <table border="0" cellspacing="0" cellpadding="0" width="100%">
              <tr>
                <td valign="top" cellspacing="0" cellpadding="0" width="100%">
                  <table border="0" cellspacing="0" cellpadding="2" width="100%">
                    <tr>
                      <td valign="top" cellpadding="0">
                        <img src="\assets\splogo.gif" />
                      </td>
                      <td>
                        <table border="0" cellspacing="0" cellpadding="0" width="100%">
                          <tr>
                            <td align="right" width="100%">

                              <table border="0" cellspacing="0" cellpadding="0" width="100%">
                                <tr>
                                  <td class="box1">
                                  </td>
                                  <td class="box2">

                                    <i>
                                      <b>
                                        <font size="4">Work Order / Receipt</font>
                                      </b>
                                    </i>

                                  </td>
                                  <td class="box3">
                                  </td>
                                </tr>
                                <tr>
                                  <td class="box4">
                                  </td>
                                  <td class="boxcontent">
                                    <table border="1" cellspacing="0" cellpadding="2" width="100%">
                                      <tr>
                                        <th valign="middle" align="right" cellpadding="2" width="50%">
                                          <b>
                                            <i>Order Number</i>
                                          </b>
                                        </th>
                                        <td width="50%" align="left">{{currentOrder?.order_number}}</td>
                                      </tr>
                                      <tr>
                                        <th valign="middle" align="right" cellpadding="2" width="50%">
                                          <b>
                                            <i>Bill To</i>
                                          </b>
                                        </th>
                                        <td valign="top" width="50%">
                                          <table border="0" cellspacing="0" cellpadding="0" width="100%">
                                            <tr>
                                              <td cellpadding="2" align="left">{{currentOrder.customer?.customer_name}}</td>
                                            </tr>
                                            <tr>
                                              <td cellpadding="2" align="left">{{currentOrder.BILL_ADDRESS_1}}
                                                <br />{{currentOrder.BILL_ADDRESS_2}}</td>
                                            </tr>
                                            <tr>
                                              <td cellpadding="2" align="left">{{currentOrder.BILL_CITY}} {{currentOrder.BILL_STATE}} {{currentOrder.BILL_ZIP}}</td>
                                            </tr>
                                          </table>
                                        </td>
                                      </tr>
                                      <tr>
                                        <th valign="middle" align="right" cellpadding="2" width="50%">
                                          <b>
                                            <i>Ship To</i>
                                          </b>
                                        </th>
                                        <td valign="top" width="50%">
                                          <table border="0" cellspacing="0" cellpadding="0" width="100%">
                                            <tr>
                                              <td cellpadding="2" align="left">{{currentOrder.customer?.customer_name}}</td>
                                            </tr>
                                            <tr>
                                              <td cellpadding="2" align="left">Attn: {{currentOrder.ship_attn}}</td>
                                            </tr>
                                            <tr>
                                              <td cellpadding="2" align="left">{{currentOrder.SHIP_ADDRESS_1}}
                                                <br/>{{currentOrder.SHIP_ADDRESS_2}}</td>
                                            </tr>
                                            <tr>
                                              <td cellpadding="2" align="left">{{currentOrder.SHIP_CITY}}; {{currentOrder.SHIP_STATE}} {{currentOrder.SHIP_ZIP}}</td>
                                            </tr>
                                          </table>
                                        </td>
                                      </tr>
                                      <tr>
                                        <th valign="middle" align="right" cellpadding="2" width="50%">
                                          <b>
                                            <i>Order Date</i>
                                          </b>
                                        </th>
                                        <td width="50%" align="left">{{currentOrder.order_date | date: 'MM/dd/yyyy'}}</td>
                                      </tr>
                                      <tr>
                                        <th valign="middle" align="right" cellpadding="2" width="50%">
                                          <b>
                                            <i>Due Date</i>
                                          </b>
                                        </th>
                                        <td width="50%" align="left">{{currentOrder.order_due_date | date: 'MM/dd/yyyy'}}</td>
                                      </tr>
                                      <tr>
                                        <th valign="middle" align="right" cellpadding="2" width="50%">
                                          <b>
                                            <i>PO #</i>
                                          </b>
                                        </th>
                                        <td width="50%" align="left">{{currentOrder.purchase_order}}</td>
                                      </tr>
                                    </table>
                                  </td>
                                  <td class="box5">
                                  </td>
                                </tr>
                                <tr>
                                  <td class="box6">
                                  </td>
                                  <td class="box7">
                                  </td>
                                  <td class="box8">
                                  </td>
                                </tr>
                              </table>
                            </td>
                          </tr>
                        </table>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
            <table border="0" cellspacing="0" cellpadding="0" width="100%">
              <tr>
                <td class="box1">
                </td>
                <td class="box2">
                </td>
                <td class="box3">
                </td>
              </tr>

              <tr>
                <td class="box4">
                </td>
                <td class="boxcontent">
                  <table border="1" cellpadding="2" cellspacing="0" width="100%">
                    <thead>
                      <tr>Items</tr>
                      <tr>
                        <th colspan="3">Item</th>
                        <th>Style</th>
                        <th>Y/A</th>
                        <th>Color</th>
                        <th>XS</th>
                        <th>S</th>
                        <th>M</th>
                        <th>L</th>
                        <th>XL</th>
                        <th>2XL</th>
                        <th>3XL</th>
                        <th>4XL</th>
                        <th>5XL</th>
                        <th colspan="2">Other1</th>
                        <th colspan="2">Other2</th>
                        <th colspan="2">Other3</th>
                        <th>Qty</th>
                        <th>Price</th>
                        <th>Sub</th>
                        <th>Tax</th>
                      </tr>
                    </thead>
                    <tbody>
                      <!--foreachrow table="ORDER_DETAIL"-->
                      <tr *ngFor="let lineItem of order.order_detail">
                        <td colspan="3">{{getItemDescription(lineItem.pricelist_id)}}</td>
                        <td>{{lineItem.product_code}}</td>
                        <td>{{getStyleDescription(lineItem.style_code)}}</td>
                        <td>{{lineItem.color_code}}</td>
                        <td>{{lineItem.xsmall_qty}}</td>
                        <td>{{lineItem.small_qty}}</td>
                        <td>{{lineItem.med_qty}}</td>
                        <td>{{lineItem.large_qty}}</td>
                        <td>{{lineItem.xl_qty}}</td>
                        <td>{{lineItem.C2xl_qty}}</td>
                        <td>{{lineItem.C3xl_qty}}</td>
                        <td>{{lineItem.C4xl_qty}}</td>
                        <td>{{lineItem.C5xl_qty}}</td>
                        <td>{{getSizeTypeDescription(lineItem.other1_type)}}</td>
                        <td>{{lineItem.other1_qty}}</td>
                        <td>{{getSizeTypeDescription(lineItem.other2_type)}}</td>
                        <td>{{lineItem.other2_qty}}</td>
                        <td>{{getSizeTypeDescription(lineItem.other3_type)}}</td>
                        <td>{{lineItem.other3_qty}}</td>
                        <td align="right">{{lineItem.item_quantity}}</td>
                        <td align="right">{{lineItem.item_price_each}}</td>
                        <td align="right">{{lineItem.item_price_ext}}</td>
                        <td align="right">

                          <!--includeif function="IS_TAXABLE"-->
                          <img src="assets\checkmark.png" />
                          <!--endincludeif-->

                        </td>
                      </tr>
                      <!--endforeachrow-->
                      <tr>Fees</tr>
                      <!--foreachrow table="ORDER_FEES"-->
                      <tr *ngFor="let orderFee of orderFees">
                        <td colspan="5">{{getFeeDescription(orderFee.pricelist_id)}}</td>
                        <td colspan="16"></td>
                        <td align="right">{{orderFee.fee_quantity}}</td>
                        <td align="right">{{orderFee.fee_price_each}}</td>
                        <td align="right">{{orderFee.fee_price_ext}}</td>
                        <td align="right">

                          <!--includeif function="IS_TAXABLE_FEE"-->
                          <img src="assets\checkmark.png" />
                          <!--endincludeif-->

                        </td>
                      </tr>
                      <!--endforeachrow-->
                    </tbody>
                  </table>
                  <table border="0" cellspacing="0" width="100%">
                    <tr>
                      <td width="60%" valign="top" border="0">
                        <table border="1" align="left" cellspacing="0" cellpadding="3">
                          <tr>Art Info</tr>
                          <tr>
                            <th>Placement</th>
                            <th>Colors</th>
                            <th>Note</th>
                          </tr>
                          <!--foreachrow table="ORDER_ART_PLACEMENT"-->
                          <tr *ngFor="let placement of orderArtPlacement">
                            <td>{{getLookupDescription(placement.art_placement_code)}}</td>
                            <td>{{placement.colors}}</td>
                            <td>{{placement.notes}}</td>
                          </tr>
                          <!--endforeachrow-->
                          <tr>Art File</tr>
                          <tr>
                            <th>Image File</th>
                            <th>Art Folder</th>
                            <th>Note</th>
                          </tr>
                          <!--foreachrow table="ORDER_ART_FILE"-->
                          <tr *ngFor="let artFile of orderArtFile">
                            <td>{{artFile.image_file}}</td>
                            <td>{{artFile.art_folder}}</td>
                            <td>{{artFile.note}}</td>
                          </tr>
                          <!--endforeachrow-->
                          <tr>Payments</tr>
                          <tr>
                            <th>Amount</th>
                            <th>Type</th>
                            <th>Date</th>
                          </tr>
                          <!--foreachrow table="ORDER_PAYMENTS"-->
                          <tr *ngFor="let payment of orderPayments">
                            <td>{{payment.payment_amount}}</td>
                            <td>{{getLookupDescription(payment.payment_type_code)}}</td>
                            <td>{{payment.payment_date | date: 'MM/dd/yyyy'}}</td>
                          </tr>
                          <!--endforeachrow-->
                        </table>
                      </td>
                      <td width="30%" border="0">
                        <table border="1" align="right" cellspacing="0" cellpadding="3">
                          <tr>
                            <th align="right">Subtotal</th>
                            <td align="right">${{currentOrder.subtotal}}</td>
                          </tr>
                          <tr>
                            <th align="right">Tax Rate</th>
                            <td align="right">{{currentOrder.tax_rate}}%</td>
                          </tr>
                          <tr>
                            <th align="right">Tax</th>
                            <td align="right">${{currentOrder.tax_amount}}</td>
                          </tr>
                          <tr>
                            <th align="right">Shipping</th>
                            <td align="right">${{currentOrder.shipping}}</td>
                          </tr>
                          <tr>
                            <th align="right">Total</th>
                            <td align="right">${{currentOrder.total}}</td>
                          </tr>
                          <tr>
                            <th align="right">Payments</th>
                            <td align="right">${{currentOrder.payments}}</td>
                          </tr>
                          <tr>
                            <th align="right">
                              <b>
                                <i>Balance Due</i>
                              </b>
                            </th>
                            <td align="right">
                              <b>${{currentOrder.balance_due}}</b>
                            </td>
                          </tr>
                        </table>
                      </td>
                    </tr>
                  </table>

                  <h5>
                    <i>
                      <b>Thank you for your order! We appreciate your business.</b>
                    </i>
                    <br/> A 50% deposit is required to initiate all orders. Balance is due upon shipment of order.
                  </h5>
                  <h6>All artwork and custom designs are for the use only of the individual or organization paying for the designs.
                    The "screens" remain the property of Southpaw Screen Printing. </h6>

                </td>
                <td class="box5">
                </td>
              </tr>

              <tr>
                <td class="box6">
                </td>
                <td class="box7">
                </td>
                <td class="box8">
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="col-md-2">
            <button id="create" class="form-control btn-primary" type="button" style="font-size:10px;"  (click)="generateInvoice()">Save/Print</button>
          </div>
      </div>
    </div>
  </section>
</div>

<dx-load-panel #loadPanel shadingColor="rgba(0,0,0,0.4)" [position]="{ of: window }" message="Rendering Invoice..." [(visible)]="loading"
  [showIndicator]="true" [showPane]="true" [shading]="true" [closeOnOutsideClick]="false">
</dx-load-panel>